(this["webpackJsonpcooking-ninja"]=this["webpackJsonpcooking-ninja"]||[]).push([[0],{38:function(e,t,c){},39:function(e,t,c){},45:function(e,t,c){},47:function(e,t,c){},48:function(e,t,c){},49:function(e,t,c){},51:function(e,t,c){},52:function(e,t,c){},53:function(e,t,c){},54:function(e,t,c){},55:function(e,t,c){},56:function(e,t,c){},57:function(e,t,c){},58:function(e,t,c){},59:function(e,t,c){"use strict";c.r(t);var n=c(2),a=c.n(n),r=c(30),i=c.n(r),s=(c(38),c(9)),o=c(14),l=c(4),j=(c(39),c(1));function u(){var e=Object(n.useState)(""),t=Object(l.a)(e,2),c=t[0],a=t[1],r=Object(o.f)();return Object(j.jsx)("div",{className:"searchbar",children:Object(j.jsxs)("form",{onSubmit:function(e){e.preventDefault(),r.push("/search?q=".concat(c))},children:[Object(j.jsx)("label",{htmlFor:"search",children:"Search:"}),Object(j.jsx)("input",{type:"text",id:"search",onChange:function(e){return a(e.target.value)},required:!0})]})})}var d=c(7),b=Object(n.createContext)(),O=function(e,t){switch(t.type){case"CHANGE_COLOR":return Object(d.a)(Object(d.a)({},e),{},{color:t.payload});case"CHANGE_MODE":return Object(d.a)(Object(d.a)({},e),{},{mode:t.payload});default:return e}};function h(e){var t=e.children,c=Object(n.useReducer)(O,{color:"#58249c",mode:"light"}),a=Object(l.a)(c,2),r=a[0],i=a[1];return Object(j.jsx)(b.Provider,{value:Object(d.a)(Object(d.a)({},r),{},{changeColor:function(e){i({type:"CHANGE_COLOR",payload:e})},changeMode:function(e){i({type:"CHANGE_MODE",payload:e})}}),children:t})}var p=function(){var e=Object(n.useContext)(b);if(void 0===e)throw new Error("useTheme() must be used inside a ThemeProvider");return e},m=a.a.createContext({token:"",isLoggedIn:!1,login:function(e){},logout:function(){}}),g=function(e){var t=localStorage.getItem("token"),c=Object(n.useState)(t),a=Object(l.a)(c,2),r=a[0],i=a[1],s=function(){i(null),localStorage.removeItem("token")},o={token:r,isLoggedIn:!!r,login:function(e,t){i(e),localStorage.setItem("token",e);var c=function(e){var t=(new Date).getTime();return new Date(e).getTime()-t}(t);setTimeout(s,c)},logout:s};return Object(j.jsx)(m.Provider,{value:o,children:e.children})},x=m,f=c.p+"static/media/logout.108836fb.svg";c(45);function v(){var e=p(),t=e.color,c=(e.mode,Object(n.useContext)(x));return Object(j.jsx)("div",{className:"navbar",style:{background:t},children:Object(j.jsxs)("nav",{children:[Object(j.jsx)(s.b,{to:"/",className:"brand",children:Object(j.jsx)("h1",{children:"Appetite"})}),Object(j.jsx)(u,{}),c.isLoggedIn&&Object(j.jsx)(s.b,{className:"link",to:"/create",children:"Create Recipe"}),!c.isLoggedIn&&Object(j.jsx)(s.b,{className:"link",to:"/login",children:"Signup/Login"}),c.isLoggedIn&&Object(j.jsx)("div",{className:"logout",children:Object(j.jsx)("img",{src:f,alt:"Logout",onClick:c.logout,style:{filter:"invert(100%"}})})]})})}var N=c(27);c(60);N.a.initializeApp({apiKey:"AIzaSyBQzAksGcSAbgR9i9a0WNJFdSi33EJKBLQ",authDomain:"react-recipe-directory-d6466.firebaseapp.com",projectId:"react-recipe-directory-d6466",storageBucket:"react-recipe-directory-d6466.appspot.com",messagingSenderId:"118388807863",appId:"1:118388807863:web:af0ed816296554ad649532"});var k=N.a.firestore(),S=(c(47),c.p+"static/media/trashcan.3270f2c9.svg");c(48);function y(e){var t=e.recipe,c=p().mode;return Object(j.jsx)("div",{className:"recipe-item",children:Object(j.jsxs)("div",{className:"card ".concat(c),children:[Object(j.jsxs)("div",{className:"info",children:[Object(j.jsx)("h3",{children:t.title}),Object(j.jsxs)("p",{children:[t.cookingTime," to make."]}),Object(j.jsxs)("div",{children:[t.method.substring(0,400),"..."]}),Object(j.jsxs)("div",{className:"links",children:[Object(j.jsx)(s.b,{to:"/recipes/".concat(t.id),children:"Cook This"}),Object(j.jsx)("img",{className:"delete",src:S,alt:"delete",onClick:function(){return e=t.id,void k.collection("recipes").doc(e).delete();var e}})]})]}),Object(j.jsx)("div",{className:"img",children:Object(j.jsx)("img",{src:t.image,alt:t.title})})]})},t.id)}function C(e){var t=e.recipes;return 0===t.length?Object(j.jsx)("div",{className:"error",children:"No recipes to load..."}):Object(j.jsx)("div",{className:"recipe-list",children:t.map((function(e){return Object(j.jsx)(y,{recipe:e},e.id)}))})}c(49);function w(){var e=Object(n.useState)(null),t=Object(l.a)(e,2),c=t[0],a=t[1],r=Object(n.useState)(!1),i=Object(l.a)(r,2),s=i[0],o=i[1],u=Object(n.useState)(!1),b=Object(l.a)(u,2),O=b[0],h=b[1];return Object(n.useEffect)((function(){o(!0);var e=k.collection("recipes").onSnapshot((function(e){if(e.empty)h("No recipes to load"),o(!1);else{var t=[];e.docs.forEach((function(e){t.push(Object(d.a)({id:e.id},e.data()))})),a(t),o(!1)}}),(function(e){h(e.message),o(!1)}));return function(){return e()}}),[]),Object(j.jsxs)("div",{className:"home",children:[O&&Object(j.jsx)("p",{className:"error",children:O}),s&&Object(j.jsx)("p",{className:"loading",children:"Loading..."}),c&&Object(j.jsx)(C,{recipes:c})]})}var I=c(33),L=c(18),T=c.n(L),E=c(22);c(51);function R(){var e=Object(n.useState)(""),t=Object(l.a)(e,2),c=t[0],a=t[1],r=Object(n.useState)(""),i=Object(l.a)(r,2),s=i[0],u=i[1],d=Object(n.useState)(""),b=Object(l.a)(d,2),O=b[0],h=b[1],m=Object(n.useState)(""),g=Object(l.a)(m,2),x=g[0],f=g[1],v=Object(n.useState)([]),N=Object(l.a)(v,2),S=N[0],y=N[1],C=Object(n.useState)(""),w=Object(l.a)(C,2),L=w[0],R=w[1],A=Object(n.useRef)(null),D=Object(o.f)(),q=p(),J=q.mode,P=q.color,B=function(){var e=Object(E.a)(T.a.mark((function e(t){var n;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n={title:c,ingredients:S,method:s,cookingTime:O+" minutes",image:L},e.prev=2,e.next=5,k.collection("recipes").add(n);case 5:D.push("/"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(t){return e.apply(this,arguments)}}();return Object(j.jsxs)("div",{className:"create ".concat(J),children:[Object(j.jsx)("h2",{className:"page-title",children:"Add a New Recipe"}),Object(j.jsxs)("form",{onSubmit:B,children:[Object(j.jsxs)("label",{children:[Object(j.jsx)("span",{className:J,children:"Recipe title:"}),Object(j.jsx)("input",{type:"text",onChange:function(e){return a(e.target.value)},value:c,required:!0})]}),Object(j.jsxs)("label",{children:[Object(j.jsx)("span",{className:J,children:"Recipe ingredients:"}),Object(j.jsxs)("div",{className:"ingredients",children:[Object(j.jsx)("input",{type:"text",onChange:function(e){return f(e.target.value)},value:x,ref:A}),Object(j.jsx)("button",{onClick:function(e){e.preventDefault();var t=x.trim();t&&!S.includes(t)&&y((function(e){return[].concat(Object(I.a)(e),[t])})),f(""),A.current.focus()},style:{background:P},children:"add"})]})]}),Object(j.jsxs)("p",{className:J,children:["Current ingredients:"," ",S.map((function(e){return Object(j.jsxs)("em",{children:[e,", "]},e)}))]}),Object(j.jsxs)("label",{children:[Object(j.jsx)("span",{className:J,children:"Recipe method:"}),Object(j.jsx)("textarea",{onChange:function(e){return u(e.target.value)},value:s,required:!0})]}),Object(j.jsxs)("label",{children:[Object(j.jsx)("span",{className:J,children:"Cooking time (minutes):"}),Object(j.jsx)("input",{type:"number",onChange:function(e){return h(e.target.value)},value:O,required:!0})]}),Object(j.jsxs)("label",{children:[Object(j.jsx)("span",{className:J,children:"Image (url):"}),Object(j.jsx)("input",{type:"text",onChange:function(e){return R(e.target.value)},value:L,required:!0})]}),Object(j.jsx)("button",{className:"btn",children:"submit"})]})]})}c(52);var A=c.p+"static/media/loading.043eeb1d.svg";function D(){var e=Object(o.g)().search,t=new URLSearchParams(e).get("q"),c=p().mode,a=Object(n.useState)(null),r=Object(l.a)(a,2),i=r[0],s=r[1],u=Object(n.useState)(!1),b=Object(l.a)(u,2),O=b[0],h=b[1],m=Object(n.useState)(!1),g=Object(l.a)(m,2),x=g[0],f=g[1];return Object(n.useEffect)((function(){f(!0),s(null);try{k.collection("recipes").get().then((function(e){var c=[];e.forEach((function(e){e.data().title.toLowerCase().includes(t.toLowerCase())&&c.push(Object(d.a)({id:e.id},e.data()))})),f(!1),s(c)}))}catch(e){h(e)}}),[t]),Object(j.jsxs)("div",{children:[Object(j.jsxs)("h1",{className:"page-title ".concat(c),children:['Search results for "',t,'"']}),O&&Object(j.jsx)("p",{className:"error ".concat(c),children:O}),x&&Object(j.jsx)("div",{className:"loader-image",children:Object(j.jsx)("img",{src:A,alt:"Loading",style:{filter:"dark"===c?"invert(100%)":"invert(20%)"}})}),i&&Object(j.jsx)("div",{className:"search-results",children:Object(j.jsx)(C,{recipes:i})})]})}c(53);function q(){var e=Object(o.h)().id,t=p(),c=t.mode,a=t.color,r=Object(o.f)(),i=Object(n.useState)(null),s=Object(l.a)(i,2),u=s[0],b=s[1],O=Object(n.useState)(!1),h=Object(l.a)(O,2),m=h[0],g=h[1],x=Object(n.useState)(!1),f=Object(l.a)(x,2),v=f[0],N=f[1];Object(n.useEffect)((function(){g(!0);var t=k.collection("recipes").doc(e).onSnapshot((function(e){e.exists?(g(!1),b(e.data())):(g(!1),N("Could not find this recipe"))}));return function(){return t()}}),[e]);return Object(j.jsxs)("div",{className:"recipe ".concat(c),children:[v&&Object(j.jsx)("p",{className:"error",children:v}),m&&Object(j.jsx)("p",{className:"loading",children:"Loading..."}),u&&Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("img",{className:"image",src:u.image,alt:u.title}),Object(j.jsx)("h2",{className:"page-title",children:u.title}),Object(j.jsxs)("small",{children:["Takes ",u.cookingTime," to cook."]}),Object(j.jsx)("ul",{children:u.ingredients.map((function(e){return Object(j.jsx)("li",{children:e},e)}))}),Object(j.jsx)("p",{className:"method",children:u.method}),Object(j.jsx)("button",{onClick:function(){r.push({pathname:"/update/".concat(e),recipe:Object(d.a)(Object(d.a)({},u),{},{id:e})})},style:{background:a},children:"Update"}),Object(j.jsx)("button",{onClick:function(){return function(e){k.collection("recipes").doc(e).delete(),r.push("/")}(e)},style:{background:a},children:"Delete"})]})]})}c(54);c(55);function J(){var e=Object(o.g)().recipe;console.log(e);var t=Object(n.useState)(e.title),c=Object(l.a)(t,2),a=c[0],r=c[1],i=Object(n.useState)(e.method),s=Object(l.a)(i,2),u=s[0],b=s[1],O=Object(n.useState)(e.cookingTime.replace(/\D/g,"")),h=Object(l.a)(O,2),p=h[0],m=h[1],g=Object(n.useState)(e.ingredients),x=Object(l.a)(g,2),f=x[0],v=x[1],N=Object(n.useState)(e.image),S=Object(l.a)(N,2),y=S[0],C=S[1],w=Object(o.f)(),I=function(){var t=Object(E.a)(T.a.mark((function t(c){var n;return T.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c.preventDefault(),n={title:a,ingredients:f,method:u,cookingTime:p+" minutes",image:y},t.prev=2,t.next=5,k.collection("recipes").doc(e.id).update(Object(d.a)({},n));case 5:t.next=10;break;case 7:t.prev=7,t.t0=t.catch(2),console.log(t.t0);case 10:w.push("/recipes/".concat(e.id));case 11:case"end":return t.stop()}}),t,null,[[2,7]])})));return function(e){return t.apply(this,arguments)}}();return Object(j.jsxs)("div",{className:"update",children:[Object(j.jsx)("h2",{className:"page-title",children:"Update your recipe"}),Object(j.jsxs)("form",{onSubmit:I,children:[Object(j.jsxs)("label",{children:[Object(j.jsx)("span",{children:"Recipe title:"}),Object(j.jsx)("input",{type:"text",onChange:function(e){return r(e.target.value)},value:a,required:!0})]}),Object(j.jsxs)("label",{children:[Object(j.jsx)("span",{children:"Recipe ingredients:"}),Object(j.jsx)("div",{className:"ingredients",children:Object(j.jsx)("input",{type:"text",onChange:function(e){return function(e){var t=e.target.value.split(",");v(t)}(e)},value:f})})]}),Object(j.jsxs)("label",{children:[Object(j.jsx)("span",{children:"Recipe method:"}),Object(j.jsx)("textarea",{onChange:function(e){return b(e.target.value)},value:u,required:!0})]}),Object(j.jsxs)("label",{children:[Object(j.jsx)("span",{children:"Cooking time (minutes):"}),Object(j.jsx)("input",{type:"number",onChange:function(e){return m(e.target.value)},value:p,required:!0})]}),Object(j.jsxs)("label",{children:[Object(j.jsx)("span",{children:"Image (url):"}),Object(j.jsx)("input",{type:"text",onChange:function(e){return C(e.target.value)},value:y,required:!0})]}),Object(j.jsx)("button",{className:"btn",children:"submit"})]})]})}var P="AIzaSyBQzAksGcSAbgR9i9a0WNJFdSi33EJKBLQ";c(56);function B(){var e=Object(n.useState)(!1),t=Object(l.a)(e,2),c=t[0],a=t[1],r=Object(n.useRef)(),i=Object(n.useRef)(),s=Object(n.useState)(!1),u=Object(l.a)(s,2),d=(u[0],u[1]),b=Object(o.f)(),O=Object(n.useContext)(x);return Object(j.jsxs)("div",{className:"authentication",children:[c&&Object(j.jsx)("h2",{children:"Login"}),!c&&Object(j.jsx)("h2",{children:"Signup"}),Object(j.jsxs)("form",{onSubmit:function(e){e.preventDefault();var t,n=r.current.value,a=i.current.value;d(!0),t=c?"https://identitytoolkit.googleapis.com/v1/accounts:signInWithPassword?key=".concat(P):"https://identitytoolkit.googleapis.com/v1/accounts:signUp?key=".concat(P),fetch(t,{method:"POST",body:JSON.stringify({email:n,password:a,returnSecureToken:!0}),headers:{"Content-Type":"application/json"}}).then((function(e){return d(!1),e.ok?e.json():e.json().then((function(e){var t="Authentication failed!";throw e&e.error&&e.error.message&&(t=e.error.message),new Error(t)}))})).then((function(e){var t=new Date((new Date).getTime()+1e3*+e.expiresIn);O.login(e.idToken,t.toISOString()),b.replace("/")})).catch((function(e){alert(e.message)}))},children:[Object(j.jsx)("label",{htmlFor:"email",children:"E-mail:"}),Object(j.jsx)("input",{type:"email",id:"email",ref:r,required:!0}),Object(j.jsx)("label",{htmlFor:"password",children:"Password:"}),Object(j.jsx)("input",{type:"password",id:"password",ref:i,required:!0}),Object(j.jsx)("button",{children:"Submit"})]}),c&&Object(j.jsx)("button",{className:"toggle-login",onClick:function(){a(!1)},children:"Create an account"}),!c&&Object(j.jsx)("button",{className:"toggle-login",onClick:function(){return a(!0)},children:"Already registered?"})]})}c(57),c(58);var F=c.p+"static/media/mode-icon.651cf792.svg",G=["rgba(229, 255, 202, 0.433)","#249c6b","#b70233"];function z(){var e=p(),t=e.changeColor,c=e.changeMode,n=e.mode;return Object(j.jsxs)("div",{className:"theme-selector",children:[Object(j.jsx)("div",{className:"mode-toggle",children:Object(j.jsx)("img",{src:F,alt:"Toggle dark/light mode",onClick:function(){c("dark"===n?"light":"dark")},style:{filter:"dark"===n?"invert(100%)":"invert(20%"}})}),Object(j.jsx)("div",{className:"theme-buttons",children:G.map((function(e){return Object(j.jsx)("div",{onClick:function(){return t(e)},style:{background:e}},e)}))})]})}var M=function(){var e=p().mode;return Object(j.jsx)("div",{className:"App ".concat(e),children:Object(j.jsxs)(s.a,{children:[Object(j.jsx)(v,{}),Object(j.jsx)(z,{}),Object(j.jsxs)(o.c,{children:[Object(j.jsx)(o.a,{exact:!0,path:"/",children:Object(j.jsx)(w,{})}),Object(j.jsx)(o.a,{path:"/create",children:Object(j.jsx)(R,{})}),Object(j.jsx)(o.a,{path:"/update/:id",children:Object(j.jsx)(J,{})}),Object(j.jsx)(o.a,{path:"/search",children:Object(j.jsx)(D,{})}),Object(j.jsx)(o.a,{path:"/recipes/:id",children:Object(j.jsx)(q,{})}),Object(j.jsx)(o.a,{path:"/login",children:Object(j.jsx)(B,{})})]})]})})};i.a.render(Object(j.jsx)(a.a.StrictMode,{children:Object(j.jsx)(h,{children:Object(j.jsx)(g,{children:Object(j.jsx)(M,{})})})}),document.getElementById("root"))}},[[59,1,2]]]);
//# sourceMappingURL=main.f730382b.chunk.js.map